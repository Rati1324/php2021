<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="login.css">
</head>

<body>
    
    <header>
        <a href="/register">
            <h3>Register</h3>
        </a>
        <h3>Student Portal</h3>
        <a href="/contact">
            <h3>Contact</h3>
        </a>
    </header>    
    
    <div class="container">
        <div class="wrapper">
        <h3>Log in</h3>
                <form autocomplete="off">
                    <ul>
                        <li>
                            <label for="email">E-mail:</label><br>
                            <input type="text" id="email" name="email" >
                        </li>
                            
                        <li>
                            <label for="password">Password:</label><br>
                            <input type="password" id="password" name="password"  >
                        </li>

                        <li style="display:flex;flex-direction: column;">
                            <button id="submit">Submit</button>
                        </li>
                            
                    </ul>
                </form>
                <div class="errors_wrapper">
                    <p class="errors"></p>
                </div>
        </div>
    </div>
        
        <footer>
    </footer>
    
    <script>
        var form = document.querySelector("form")
        form.addEventListener('submit', send)
        
        function send(e) {
            var email = document.getElementById("email").value
            var pw = document.getElementById("password").value
            e.preventDefault()

            fetch("/", {
                method: "POST",
                headers: {"Content-type": "application/json"},
                body: JSON.stringify({
                    email,
                    pw,
                })
            })
                .then(res => {
                    if (res.status == 200) window.location.href = '/portal' 
                    else document.querySelector('.errors').innerHTML = 'Email or Password Not Found'
                })
                
            }
    </script>
    
</body>
</html>

